<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Game Stats Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/css/main.css?v=4">
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="#" class="nav-logo" onclick="goBackHome(); return false;">
                <img src="src/assets/profile-pictures/vv.png" alt="VV Logo" class="nav-logo-img">
                PUB STATS
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link" onclick="goBackHome(); return false;">Stats Home</a>
                <a href="#" class="nav-link" onclick="showPlayersPage(); return false;">Players</a>
                <a href="#" class="nav-link" onclick="showGameLogPage(); return false;">Game Log</a>
            </div>
        </div>
    </nav>

    <!-- Game Log Page -->
    <div class="game-log-page" id="gameLogPage" style="display: none;">
        <div class="game-log-header">
            <h1 class="game-log-title">Game Log</h1>
        </div>
        <div class="game-log-peek" aria-hidden="true">
            <img src="src/assets/background/chansey.png" alt="">
        </div>
        <div class="game-log-container">
            <div id="gameLogContent">
                <!-- Game log will be populated here -->
            </div>
        </div>
    </div>

    <!-- Players Page -->
    <div class="players-page" id="playersPage" style="display: none;">
        <div class="players-page-header">
            <h2 class="players-page-title">BONK NATION</h2>
        </div>
        
        <div class="players-carousel-container">
            <button class="carousel-btn carousel-btn-left" id="carouselLeftBtn">←</button>
            <div class="players-carousel" id="playersCarousel">
                <!-- Player cards will be populated by JavaScript -->
            </div>
            <button class="carousel-btn carousel-btn-right" id="carouselRightBtn">→</button>
        </div>

        <div class="league-roster-section">
            <div class="roster-header">
                <h2 class="roster-title">LEAGUE ROSTER</h2>
                <div class="roster-controls">
                    <div class="roster-period-tabs">
                        <button class="period-tab active" data-section="roster" data-period="alltime">All Time</button>
                        <button class="period-tab" data-section="roster" data-period="monthly">Monthly</button>
                    </div>
                    <div class="month-selector" id="rosterMonthSelector" style="display: none;">
                        <label for="rosterMonthSelect">Select Month:</label>
                        <select id="rosterMonthSelect" class="month-select">
                            <!-- Will be populated by JavaScript -->
                        </select>
                    </div>
                    <input type="text" id="playerSearch" class="player-search" placeholder="Search Players">
                </div>
            </div>
            
            <div class="roster-table-container">
                <table class="roster-table">
                    <thead>
                        <tr>
                            <th class="sortable" data-sort="name">
                                PLAYER <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="wins">
                                WINS <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="losses">
                                LOSSES <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="winRate">
                                WIN RATE <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="plusMinus">
                                +/- <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="games">
                                GAMES <span class="sort-indicator"></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="rosterTableBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div class="main-container" id="homePage">
        <div class="main-content">
            <div class="players-section">
                <div class="section-header">
                    <h2 class="section-title">BONK NATION</h2>
                    <div class="section-controls">
                        <a href="#" class="see-all-link" onclick="showPlayersPage(); return false;">See All Player Stats</a>
                    </div>
                </div>

                <div class="tabs-container">
                    <button class="tab-btn active" data-period="monthly">This Month's Leaders</button>
                    <button class="tab-btn" data-period="alltime">All Time Leaders</button>
                </div>

                <div class="date-display" id="dateDisplay"></div>

                <div class="stats-grid" id="statsGrid">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading statistics...</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title">MORE STATS</h3>
                <p class="more-stats-category">TOTAL GAMES</p>
                <div class="more-stats-list" id="moreStats">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Player Profile Page -->
    <div class="player-profile-page" id="playerProfilePage" style="display: none;">
        <div class="profile-header">
            <div class="profile-header-content">
                <div class="profile-top-section">
                    <div class="profile-picture-container">
                        <div class="profile-picture" id="profilePicture">
                            <!-- Profile picture will go here later -->
                        </div>
                        <div class="profile-period-controls">
                            <div class="profile-period-tabs">
                                <button class="period-tab" data-section="profile" data-period="alltime">All Time</button>
                                <button class="period-tab active" data-section="profile" data-period="monthly">Monthly</button>
                            </div>
                            <div class="month-selector" id="profileMonthSelector" style="display: none;">
                                <label for="profileMonthSelect">Select Month:</label>
                                <select id="profileMonthSelect" class="month-select">
                                    <!-- Will be populated by JavaScript -->
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="profile-stats-section">
                        <h1 class="profile-name" id="profileName">Player Name</h1>
                        <div class="profile-stats-grid" id="profileStatsGrid">
                            <!-- Stats will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="profile-accolades-section" id="profileAccoladesSection" style="display: none;">
                        <div class="accolades-badges" id="accoladesList">
                            <!-- Accolades will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="profile-description" id="profileDescription">
                    <!-- Description will go here later -->
                </div>
            </div>
        </div>

        <div class="profile-tabs">
            <button class="profile-tab active" data-tab="synergy">Synergy</button>
            <button class="profile-tab" data-tab="matchups">Matchups</button>
        </div>

        <div class="profile-content">
            <div class="synergy-section" id="synergySection">
                <div class="period-tabs">
                    <button class="period-tab active" data-section="synergy" data-period="alltime">All Time</button>
                    <button class="period-tab" data-section="synergy" data-period="monthly">Monthly</button>
                </div>
                <div class="month-selector" id="synergyMonthSelector" style="display: none;">
                    <label for="synergyMonthSelect">Select Month:</label>
                    <select id="synergyMonthSelect" class="month-select">
                        <!-- Will be populated by JavaScript -->
                    </select>
                </div>
                <div class="synergy-wrapper">
                    <div class="synergy-lists-container">
                        <div class="synergy-top">
                            <h3 class="synergy-title">Top 5 Win Rates with Duos</h3>
                            <div class="duo-list" id="topDuosList">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                        <div class="synergy-bottom">
                            <h3 class="synergy-title">Bottom 5 Win Rates with Duos</h3>
                            <div class="duo-list" id="bottomDuosList">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    <div class="synergy-most-teamed">
                        <h3 class="synergy-title">Most Teamed With</h3>
                        <div class="most-teamed-list" id="mostTeamedList">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="matchups-section" id="matchupsSection" style="display: none;">
                <div class="period-tabs">
                    <button class="period-tab active" data-section="matchups" data-period="alltime">All Time</button>
                    <button class="period-tab" data-section="matchups" data-period="monthly">Monthly</button>
                </div>
                <div class="month-selector" id="matchupsMonthSelector" style="display: none;">
                    <label for="matchupsMonthSelect">Select Month:</label>
                    <select id="matchupsMonthSelect" class="month-select">
                        <!-- Will be populated by JavaScript -->
                    </select>
                </div>
                <div class="matchups-lists-container">
                    <div class="matchups-top">
                        <h3 class="synergy-title">Top 5 Win Rates Against</h3>
                        <div class="duo-list" id="topOpponentsList">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="matchups-bottom">
                        <h3 class="synergy-title">Bottom 5 Win Rates Against</h3>
                        <div class="duo-list" id="bottomOpponentsList">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="opponent-lookup-section">
                    <h3 class="synergy-title">Lookup Win Rate</h3>
                    <div class="lookup-toggle">
                        <button class="toggle-btn active" id="withToggle" data-mode="with">With</button>
                        <button class="toggle-btn" id="againstToggle" data-mode="against">Against</button>
                    </div>
                    <div class="lookup-controls">
                        <select id="opponentSelect" class="teammate-select">
                            <option value="">Select a player...</option>
                        </select>
                        <button id="opponentLookupBtn" class="lookup-btn">Lookup</button>
                    </div>
                    <div class="lookup-result" id="opponentLookupResult"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-links">
            <a href="https://vvbonkleague.netlify.app/" target="_blank" rel="noopener noreferrer" class="footer-link">Tournament Website</a>
            <a href="https://www.youtube.com/playlist?list=PLfuheADgyCte7BK-6tGRScObrbOGGrwhe" target="_blank" rel="noopener noreferrer" class="footer-link">YouTube Clips</a>
            <a href="https://youtube.com/playlist?list=PLvNfQh9iJN3AWBINmGbdK7bJNScei3RtA&si=5W2mE1uIrN6YRnBj" target="_blank" rel="noopener noreferrer" class="footer-link">Tournament VODs</a>
        </div>
    </footer>

    <!-- Main entry (ES module; imports state, data, utils, pages) -->
    <script type="module" src="src/js/main.js"></script>
</body>
</html>
